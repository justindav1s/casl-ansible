#!/bin/bash -e
#
# This file serves as the main entrypoint to the openshift-ansible image.
#
# For more information see the documentation:
#	https://github.com/openshift/openshift-ansible/blob/master/README_CONTAINER_IMAGE.md


# Patch /etc/passwd file with the current user info.
# The current user's entry must be correctly defined in this file in order for
# the `ssh` command to work within the created container.

echo "This is Entrypoint Script"

cd ~

git clone https://github.com:justindav1s/casl-ansible.git

mkdir /root/.azure
cp /root/openshift-azure/dev1/azure_credentials /root/.azure/credentials

rm -rf  /root/.ssh/*
cp /root/openshift-azure/dev1/ssh/id_rsa /root/.ssh &&cp /root/openshift-azure/dev1/ssh/id_rsa.pub /root/.ssh
chmod 700 /root/.ssh && chmod 600 /root/.ssh/id_rsa && chmod 644 /root/.ssh/id_rsa.pub

cd /root/casl-ansible/inventory/sample.azure.example.com.d

./setup.sh

./test.sh
